!function(t){function e(n){if(i[n])return i[n].exports;var r=i[n]={exports:{},id:n,loaded:!1};return t[n].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var i={};return e.m=t,e.c=i,e.p="",e(0)}([function(t,e,i){"use strict";function n(){var t=document.getElementById("canvas");t.width=Math.min(800,$(window).width()),t.height=9*t.width/16,$(t).css({width:t.width,height:t.height});var e=new r.BlockSpawner({spawnChance:.2,spawnable:[new r.Block({canvas:t,width:10,chance:1,image:$("#platform-10")[0]}),new r.Block({canvas:t,width:5,chance:4,image:$("#platform-5")[0]}),new r.Block({canvas:t,width:4,chance:4,image:$("#platform-4")[0]}),new r.Block({canvas:t,width:3,chance:1,image:$("#platform-3")[0]}),new r.Block({canvas:t,width:2,chance:1,image:$("#platform-2")[0]})],blocks:[new r.Block({canvas:t,width:10,x:300,y:300,image:$("#platform-10")[0]})],boundaries:{x:t.width,y:t.height/2,width:150,height:t.height/2-50},safeline:t.width-50}),i=new r.Jumper({canvas:t,image:document.getElementById("jumper"),rows:4,columns:3,rowIndex:2,columnFrequency:10}),o=null,a=function(){t.getContext("2d").clearRect(0,0,t.width,t.height),$("#score").text(parseInt(i.score)),localStorage.highscore=Math.max(parseInt(i.score),localStorage.highscore),$("#highscore").text(localStorage.highscore||0),i.blocks=e.blocks,i.draw(),e.run(),i.y>t.height+50&&(clearInterval(o),setTimeout(n,1))};o=setInterval(a,20);var s=i.jump.bind(i);$(window).keypress(s),$(window).on("touchstart",s)}var r=i(1);localStorage.highscore=localStorage.highscore||0,$(document).ready(n)},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t){return t&&t.__esModule?t:{"default":t}},r=function(t,e,i){for(var n=!0;n;){s=h=c=void 0,n=!1;var r=t,o=e,a=i,s=Object.getOwnPropertyDescriptor(r,o);if(void 0!==s){if("value"in s)return s.value;var c=s.get;return void 0===c?void 0:c.call(a)}var h=Object.getPrototypeOf(r);if(null===h)return void 0;t=h,e=o,i=a,n=!0}},o=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(t.__proto__=e)},a=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),c=i(2),h=n(c),u={},l=function(){function t(){a(this,t)}return s(t,[{key:"collides",value:function(t){return this.x<t.x+t.width&&this.x+this.width>t.x&&this.y<t.y+t.height&&this.y+this.height>t.y}}]),t}();u.Jumper=function(t){function e(t){a(this,e),r(Object.getPrototypeOf(e.prototype),"constructor",this).call(this),this.sprite=new Sprite(t),this.columnFrequency=t.columnFrequency||0,this.blocks=t.blocks||[],this.timer=new h["default"],this.x=t.canvas.width/7,this.y=t.y||0,this.width=26,this.height=32,this.currentJumps=0,this.maxJumps=2,this.speed={x:400,y:0},this.gravity=t.gravity||2800,this.score=0}return o(e,t),s(e,[{key:"_applyGravity",value:function(){var t=this,e=this.timer.elapsed();this.speed.y+=this.gravity*e/1e3;var i=this.speed.y*e/1e3,n=this.speed.x*e/1e3;this.y+=i;var r=!1;this.blocks.forEach(function(e){if(e.x-=n,t.collides(e)){if(t.y-=i,!t.collides(e)){var o=e.height;return t.y<e.y&&(o=-t.height),t.y=e.y+o,t.speed.y=0,t.sprite.columnFrequency=t.columnFrequency,void(t.currentJumps=0)}t.y+=i,r=t.x+t.width-e.x}}),r&&this.blocks.forEach(function(t){t.x+=r}),this.score+=(r?r:n)/32,this.timer.reset()}},{key:"draw",value:function(){this.sprite.draw(this.x,this.y),this.blocks.forEach(function(t){t.draw()}),this._applyGravity()}},{key:"jump",value:function(){this.currentJumps!=this.maxJumps&&(this.speed.y=-900,this.currentJumps+=1,this.sprite.columnFrequency=0,this.sprite.columnIndex=2)}}]),e}(l),u.Block=function(t){function e(t){a(this,e),r(Object.getPrototypeOf(e.prototype),"constructor",this).call(this),this.options=t,this.x=t.x||0,this.y=t.y||0,this.width=32*t.width||0,this.height=32*t.height||320,this.image=t.image,this.chance=t.chance||1,this.context=t.canvas.getContext("2d")}return o(e,t),s(e,[{key:"copy",value:function(){return new e(this.options)}},{key:"draw",value:function(){this.context.drawImage(this.image,this.x,this.y)}}]),e}(l),u.BlockSpawner=function(){function t(e){var i=this;a(this,t),this.blocks=e.blocks||[],this.boundaries=e.boundaries,this.safeline=e.safeline||e.boundaries.x,this.limit=e.limit||-10;var n=e.spawnable||[];this.spawnable=[],n.forEach(function(t){for(var e=0;e<t.chance;e++)i.spawnable.push(t)})}return s(t,[{key:"_spawnable",value:function(){var t=this,e=!0;return this.blocks.forEach(function(i){e=e&&i.x+i.width<t.safeline}),e}},{key:"spawn",value:function(){var t=Math.round(Math.random()*(this.spawnable.length-1)),e=this.spawnable[t].copy();e.x=this.boundaries.x+Math.random()*this.boundaries.width,e.y=this.boundaries.y+Math.random()*this.boundaries.height,this.blocks.push(e)}},{key:"run",value:function(){var t=this;this._spawnable()&&this.spawn(),this.blocks=this.blocks.filter(function(e){return e.x+e.width>t.limit})}}]),t}(),e["default"]=u,t.exports=e["default"]},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=function(){function t(){n(this,t),this.time=new Date}return r(t,[{key:"elapsed",value:function(){return(new Date).getTime()-this.time.getTime()}},{key:"reset",value:function(){this.time=new Date}}]),t}();e["default"]=o,t.exports=e["default"]}]);